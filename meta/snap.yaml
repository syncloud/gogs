apps:
  postgresql:
    user: git
    command: bin/service.postgresql.sh start
    #post-start-command: bin/service.postgresql.sh post-start
    daemon: forking
    plugs:
    - network
    - network-bind
    restart-condition: always
    start-timeout: 2000s
    before: [server]

  server:
    user: git
    command: bin/service.server.sh start
    daemon: simple
    plugs:
    - network
    - network-bind
    restart-condition: always
    start-timeout: 2000s
    after: [postgresql]

  storage-change:
    command: hooks/storage-change

  psql:
    command: bin/psql.sh

  pgdumpall:
    command: bin/pg_dumpall.sh

confinement: strict
description: GOGS
grade: stable
name: gogs
summary: GOGS
